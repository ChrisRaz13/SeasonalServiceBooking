<!-- nav-bar.component.html -->
<nav #navbar class="navbar" [class.scrolled]="isScrolled" [@fadeSlide]>
  <!-- Logo Section -->
  <div class="navbar-logo">
    <a routerLink="/" class="logo-link">
      <img src="assets/logo.png" alt="Snow and Lawn Services Logo" class="logo-image" />
    </a>
  </div>

  <!-- Mobile Menu Button -->
  <button class="navbar-toggler" (click)="toggleNavbar()" [class.active]="navbarOpen">
    <span class="toggler-icon"></span>
    <span class="toggler-icon"></span>
    <span class="toggler-icon"></span>
  </button>

  <!-- Navigation Links -->
  <div class="navbar-links" [class.active]="navbarOpen">
    <ng-container *ngFor="let item of menuItems; let i = index">
      <!-- Regular Menu Item -->
      <a *ngIf="!item.children"
         [routerLink]="item.route"
         routerLinkActive="active-link"
         class="nav-link"
         [class.animate__fadeInDown]="navbarOpen">
        <i class="nav-icon" [class]="item.icon"></i>
        <span>{{ item.label }}</span>
      </a>

      <!-- Dropdown Menu Item -->
      <div *ngIf="item.children"
           class="dropdown-container"
           [class.show]="dropdownStates[i]"
           (mouseenter)="toggleDropdown(i, true)"
           (mouseleave)="toggleDropdown(i, false)">
        <button class="nav-link dropdown-toggle">
          <i class="nav-icon" [class]="item.icon"></i>
          <span>{{ item.label }}</span>
          <i class="nav-icon chevron" [class.rotate]="dropdownStates[i]">&#x2304;</i>
        </button>
        <div class="dropdown-menu" [class.show]="dropdownStates[i]">
          <a *ngFor="let child of item.children"
             [routerLink]="child.route"
             routerLinkActive="active-link"
             class="dropdown-item">
            <i class="nav-icon" [class]="child.icon"></i>
            <span>{{ child.label }}</span>
          </a>
        </div>
      </div>
    </ng-container>

    <!-- Emergency Contact Button -->
    <button class="emergency-btn">
      <i class="emergency-icon">âš¡</i>
      <span>24/7 Emergency Service</span>
    </button>
  </div>
</nav>
