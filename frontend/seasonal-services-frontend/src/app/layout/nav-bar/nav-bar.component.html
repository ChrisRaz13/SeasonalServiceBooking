<nav #navBar class="navbar" [class.scrolled]="isScrolled">
  <div class="nav-container">
    <!-- Logo -->
    <div class="nav-start">
      <a routerLink="/" class="logo-link">
        <img src="assets/Logo_transparent.png" alt="Company Logo" class="logo-image" #logoImage>
      </a>
    </div>

    <!-- Desktop Navigation -->
    <div class="nav-middle" [class.hidden]="isMobile">
      <a routerLink="/" class="nav-item" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
        <i class="fas fa-home"></i>
        <span>Home</span>
      </a>

      <div class="nav-item services-dropdown" (click)="toggleServices()" [class.active]="showServices">
        <i class="fas fa-concierge-bell"></i>
        <span>Services</span>
        <i class="fas fa-chevron-down"></i>

        <!-- Services Dropdown Content -->
        <div class="services-menu" [class.show]="showServices">
          <a routerLink="/snowplowing-service-page" class="service-option snow">
            <i class="fas fa-snowflake"></i>
            <div class="service-details">
              <span class="service-title">Snow Plowing</span>
              <span class="service-desc">24/7 Snow Removal Services</span>
            </div>
          </a>
          <a routerLink="/lawn-care-service-page" class="service-option lawn">
            <i class="fas fa-leaf"></i>
            <div class="service-details">
              <span class="service-title">Lawn Care</span>
              <span class="service-desc">Professional Lawn Maintenance</span>
            </div>
          </a>
        </div>
      </div>

      <a routerLink="/weather-dashboard" class="nav-item" routerLinkActive="active">
        <i class="fas fa-cloud-sun"></i>
        <span>Weather</span>
      </a>

      <a routerLink="/booking" class="nav-item" routerLinkActive="active">
        <i class="fas fa-calendar-check"></i>
        <span>Book Now</span>
      </a>
    </div>

    <!-- Mobile Menu Toggle -->
    <div class="mobile-menu-toggle" *ngIf="isMobile" (click)="toggleMobilePanel()">
      <span>Menu</span>
      <i class="fas fa-bars"></i>
    </div>

    <!-- Emergency Button -->
    <div class="nav-end" [class.hidden]="isMobile">
      <button class="contact-button" (click)="onEmergencyClick()">
        <i class="fas fa-phone-alt"></i>
        <span>24/7 EMERGENCY</span>
      </button>
    </div>
  </div>

  <!-- Mobile Side Panel -->
  <div class="mobile-panel" [class.show]="showMobilePanel">
    <div class="panel-header">
      <h3>Menu</h3>
      <button class="close-panel" (click)="toggleMobilePanel()">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <div class="panel-content">
      <a routerLink="/" class="panel-item" (click)="closeMobilePanel()">
        <i class="fas fa-home"></i>
        <span>Home</span>
      </a>

      <div class="panel-item" (click)="toggleMobileServices()">
        <div class="item-header">
          <i class="fas fa-concierge-bell"></i>
          <span>Services</span>
          <i class="fas fa-chevron-down" [class.rotate]="showMobileServices"></i>
        </div>

        <div class="panel-submenu" [class.show]="showMobileServices">
          <a routerLink="/snowplowing-service-page" class="panel-subitem" (click)="closeMobilePanel()">
            <i class="fas fa-snowflake"></i>
            <span>Snow Plowing</span>
          </a>
          <a routerLink="/lawn-care" class="panel-subitem" (click)="closeMobilePanel()">
            <i class="fas fa-leaf"></i>
            <span>Lawn Care</span>
          </a>
        </div>
      </div>

      <a routerLink="/weather-dashboard" class="panel-item" (click)="closeMobilePanel()">
        <i class="fas fa-cloud-sun"></i>
        <span>Weather</span>
      </a>

      <a routerLink="/booking" class="panel-item" (click)="closeMobilePanel()">
        <i class="fas fa-calendar-check"></i>
        <span>Book Now</span>
      </a>

      <button class="contact-button mobile" (click)="onEmergencyClick()">
        <i class="fas fa-phone-alt"></i>
        <span>24/7 EMERGENCY</span>
      </button>
    </div>
  </div>
</nav>
