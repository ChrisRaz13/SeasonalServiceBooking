<div class="forecast-container">
  <!-- Day Period -->
  <div class="forecast-period" *ngIf="forecast.dayPeriod">
    <div class="period-header" [class.today]="isToday">
      <div class="header-main">
        <h3>{{ formatPeriodHeader(forecast.dayPeriod) }}</h3>
        <div class="temp-display">{{ formatTemperature(forecast.dayPeriod.temperature) }}</div>
      </div>
      <div class="header-sub">
        <mat-icon [matTooltip]="forecast.dayPeriod.shortForecast">
          {{ getWeatherIcon(forecast.dayPeriod.shortForecast) }}
        </mat-icon>
        <span class="condition">{{ forecast.dayPeriod.shortForecast }}</span>
      </div>
    </div>

    <div class="period-details">
      <!-- Wind Info -->
      <div class="detail-item" [class.highlight]="shouldHighlightWind(forecast.dayPeriod.windSpeed)">
        <mat-icon>air</mat-icon>
        <span>{{ getWindDescription(forecast.dayPeriod.windSpeed, forecast.dayPeriod.windDirection) }}</span>
      </div>

      <!-- Precipitation Info -->
      <div class="detail-item precipitation" *ngIf="getPrecipitationDetails(forecast.dayPeriod)">
        <mat-icon>{{ forecast.dayPeriod.snowProbability > 0 ? 'ac_unit' : 'water_drop' }}</mat-icon>
        <span>{{ getPrecipitationDetails(forecast.dayPeriod) }}</span>
      </div>

      <!-- Service Status -->
      <div class="detail-item service-status"
           [class]="getStatusColor(getServiceStatus(forecast.dayPeriod))"
           *ngIf="getServiceStatus(forecast.dayPeriod) !== ServiceStatus.NOT_NEEDED">
        <mat-icon>build</mat-icon>
        <span>{{ getServiceStatus(forecast.dayPeriod) }}</span>
      </div>
    </div>

    <div class="detailed-forecast" [class.expanded]="forecast.dayPeriod.showDetails">
      <p>{{ forecast.dayPeriod.detailedForecast }}</p>
      <button mat-button (click)="toggleDetails.emit(forecast.dayPeriod)">
        {{ forecast.dayPeriod.showDetails ? 'Show Less' : 'Show More' }}
      </button>
    </div>
  </div>

  <mat-divider *ngIf="forecast.nightPeriod"></mat-divider>

  <!-- Night Period -->
  <div class="forecast-period night" *ngIf="forecast.nightPeriod">
    <div class="period-header">
      <div class="header-main">
        <h3>{{ formatPeriodHeader(forecast.nightPeriod) }}</h3>
        <div class="temp-display">{{ formatTemperature(forecast.nightPeriod.temperature) }}</div>
      </div>
      <div class="header-sub">
        <mat-icon [matTooltip]="forecast.nightPeriod.shortForecast">
          {{ getWeatherIcon(forecast.nightPeriod.shortForecast) }}
        </mat-icon>
        <span class="condition">{{ forecast.nightPeriod.shortForecast }}</span>
      </div>
    </div>

    <div class="period-details">
      <!-- Wind Info -->
      <div class="detail-item" [class.highlight]="shouldHighlightWind(forecast.nightPeriod.windSpeed)">
        <mat-icon>air</mat-icon>
        <span>{{ getWindDescription(forecast.nightPeriod.windSpeed, forecast.nightPeriod.windDirection) }}</span>
      </div>

      <!-- Precipitation Info -->
      <div class="detail-item precipitation" *ngIf="getPrecipitationDetails(forecast.nightPeriod)">
        <mat-icon>{{ forecast.nightPeriod.snowProbability > 0 ? 'ac_unit' : 'water_drop' }}</mat-icon>
        <span>{{ getPrecipitationDetails(forecast.nightPeriod) }}</span>
      </div>

      <!-- Service Status -->
      <div class="detail-item service-status"
           [class]="getStatusColor(getServiceStatus(forecast.nightPeriod))"
           *ngIf="getServiceStatus(forecast.nightPeriod) !== ServiceStatus.NOT_NEEDED">
        <mat-icon>build</mat-icon>
        <span>{{ getServiceStatus(forecast.nightPeriod) }}</span>
      </div>
    </div>

    <div class="detailed-forecast" [class.expanded]="forecast.nightPeriod.showDetails">
      <p>{{ forecast.nightPeriod.detailedForecast }}</p>
      <button mat-button (click)="toggleDetails.emit(forecast.nightPeriod)">
        {{ forecast.nightPeriod.showDetails ? 'Show Less' : 'Show More' }}
      </button>
    </div>
  </div>
</div>
